<?php

    // Save execution start time.
    //
    $starttime = microtime();

    // Print header; caching info etc.
    //
    echo "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\">\n";
    echo "<html lang=\"en\">\n";
    echo "<head>\n\n";
    echo "<meta name=\"Generator\" content=\"PHP ". phpversion() ."\">\n";
    echo "<meta name=\"Process-id\" content=\"". getmypid() ."\">\n";
    echo "<meta name=\"Location\" content=\"$REQUEST_URI\">\n";
    echo "<meta name=\"Rcsid\" content=\"\$Id$\">\n\n";
    echo "<meta http-equiv=\"Expires\" content=\"" . gmdate("l, d F Y H:i:s") ." GMT\">\n";
    echo "<meta http-equiv=\"Last-Modified\" content=\"" . gmdate("l, d F Y H:i:s") ." GMT\">\n";
    echo "<meta http-equiv=\"Cache-Control\" content=\"no-cache, must-revalidate\">\n";
    echo "<meta http-equiv=\"Pragma\" content=\"no-cache\">\n";

    // Get username and print off proper title.
    //
    $username = getenv("REMOTE_USER");

    require('engine/html.inc');

    if( html_print_title( $username, $REQUEST_URI ) )
        html_do_login( $username );
    else
        html_do_logout( $username, getenv("REMOTE_HOST") );

    // Pick url open into commands and assign values.
    //
    require ("engine/routines.inc");
    $url_array=explode("/",$REQUEST_URI);
    $action=$url_array[3];		// What action?

    // Show stylesheet info.
    //
    echo "\n<style type=\"text/css\">\n";
    echo "  p          { font: 10pt Helvetica; }\n";
    echo "  ul         { font: 10pt Helvetica; }\n";
    echo "  li         { font: 10pt Helvetica; }\n";
    echo "  a          { font: 10pt Helvetica; color: #FFFF00; text-decoration: underline; }\n";
    echo "  font       { font: 10pt Helvetica; }\n";
    echo "  b          { font-weight: bold; }\n";
    echo "  .green     { color: #00cc00; }\n";
    echo "  .red       { font: 10pt Times; font-weight: bold; color: #ff0000; }\n";
    echo "  .footer    { font: 10pt Times; text-align: center; }\n";
    echo "</style>\n\n";

    // Header end and body start.
    //
    echo "</head>\n";
    echo "<body bgcolor=\"#000000\" text=\"#FFFFFF\" style=\"margin-left: 0; margin-top: 0;\">\n\n";

    echo "<div align=\"left\">\n";
    echo "<table border=\"0\" cellpadding=\"5\" cellspacing=\"5\">\n";
    echo "  <tr>\n";
    echo "    <td width=\"120\" align=\"left\" valign=\"top\">\n";

    // Buttons (where available)
    //
    html_print_buttons($username, $REQUEST_URI);

    echo "    </td>\n";
    echo "    <td align=\"left\" valign=\"top\">\n";

    // Main code switch block
    //
    main_menu($username, $REQUEST_URI );

    echo "    </td>\n";
    echo "  </tr>\n";
    echo "</table>\n";
    echo "</div>\n";

    // Footer (where available)
    //
    html_print_foot($username, $starttime, $REQUEST_URI);
    
?>
